<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Trivia Game</title>
    <link rel="stylesheet" href="./assets/css/reset.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <!-- game font -->

    <!-- link jquery -->
    <script src="https://code.jquery.com/jquery-3.4.1.js"
        integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU=" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="./assets/css/style.css">
</head>
<!-- game content -->
<body>
    <div class="container">
        <div class="row">
            <button id="start" type="button" class="btn btn-primary">start</button>
            <div id="content"></div>
            <div id="content2"></div>

        </div>
    </div>
    <!-- game Logic -->
<script>
var game = {
    // array of game content
    array: [
        {
            question: 'Which pokemon does Pikachu evolve into?',
            option: ['mewtwo', 'pichu', 'raichu', 'pachinko'],
            answer: 'raichu'
        },
        {
            question: 'What\'s the most effective Poke Ball in the game',
            option: ['count ball', 'ultra ball', 'a pikachu', 'master ball'],
            answer: 'master ball'
        },
        {
            question: 'Which was the first gym leader that beated Ash?',
            option: ['brock', 'misty', 'giovanni', 'erika'],
            answer: 'brock'
        },
        {
            question: 'Which was the first pokemon that was released from Ash?',
            option: ['pidgeot', 'buterfree', 'pikachu', 'lapras'],
            answer: 'buterfree'
        },
        {
            question: 'How many Gym Badges must a trainer collect before challenging the Elite Four?',
            option: ['4', '6', '8', '9'],
            answer: '8'
        },
        {
            question: 'What was the first pokemon ever created?', 
            option: ['bulbasaur', 'charmander', 'rhydon', 'pikachu'], 
            answer: 'rhydon'
        },
        {
            question: 'Which pokemon has the same cry as Charizard in games?',
            option: ['mewtwo', 'rhyhorn', 'dragonite', 'lugia'],
            answer: 'rhyhorn'
        },
        {
            question: 'Which pokemon is the longest one to hatch from an egg?',
            option: ['dratini', 'onix', 'pikachu', 'venomoth'],
            answer: 'onix'
        },
        {
            question: 'Which is the lightest pokemon?',
            option: ['metapod', 'pikachu', 'ghastly', 'caterpie'],
            answer: 'ghastly'
        },
        {
            question: 'What food do Kinglers mainly eat?',
            option: ['pikachu', 'krabby', 'shellder', 'magikarp'],
            answer: 'shellder'
        }
    ],
    nextPage: function() {
        round = false; // declare that round isnt running
        $('#content').empty(); // clear out content
        count = 3; // set interval to 3 secs to run on this page
        $('#content').append(`<div id='content' class='display-2'>00:03`); // display 3 second timer

        // restart timer and check which round to advance
        game.start();
    },
    nextRound: function() {
        round = true;
        $('#content').empty();
        questionNum = 0;

        console.log('nextRound');
        $('#content').append(`<div id='countDown' class='display-2'>00:10`); // show timer
        
        // loop through object of questions and display possible options
        
        for (var i = 0; i < Object.values(game.array[questionNum])[1].length; i++) {
            console.log(`${Object.values(game.array[questionNum])[1][i]}`)
            $('#content2').append(`<button id='poss${i}' class='btn btn-primary btn-lg'>${Object.values(game.array[questionNum])[1][i]}`);
        }   

        // increment to next question each time this function is ran
        questionNum++;
        game.start();
    },
    timer: function() {
        count--; //lose a timer
        console.log(count)
        $('#content').text(`00:0${count}`); // show count left

        if (count === 0 && round === true) { // if time is out and game/round is live
            console.log('round true');
            clearInterval(count); // clear the interval that was ran
            console.log(clearInterval(count));
            console.log('advance to loading screen');
            // nextPage(); // advance next round
            game.nextPage();
        } else if (count === 0 && round === false) { // if time is out and game / round is not live
            console.log('round false');
            clearInterval(clock); // clear the interval that was ran
            // go to next round
            game.nextRound();

        }
    },
    start: function() {
        clock = setInterval(game.timer, 1000); // for every second, run timer
    },
    run: function() {
        // start count
        count = 5;
        round = false;
        console.log(Object.values(game.array[0]));
        game.start();
    },
};
console.log(game.array);
$(document).ready(function() {
    $('#start').on('click', game.run);
});
</script>
</body>
</html>