<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Trivia Game</title>
    <link rel="stylesheet" href="./assets/css/reset.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <!-- game font -->

    <!-- link jquery -->
    <script src="https://code.jquery.com/jquery-3.4.1.js"
        integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU=" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="./assets/css/style.css">
</head>
<!-- game content -->
<body>
    <div class="container">
        <div class="row">
            <button id="start" type="button" class="btn btn-primary">start</button>
            <!-- <div id="game-timer"></div> -->
            <div id="content"></div>
            
        </div>
    </div>
    <!-- game Logic -->
<script>
var game = {
    // array of game content
    array: [
        {
            question: 'Which pokemon does Pikachu evolve into?',
            option: ['mewtwo', 'pichu', 'raichu', 'pachinko'],
            answer: 'raichu',
            img: 'https://i.imgur.com/m6kX7LO.gif'
        },
        {
            question: 'What\'s the most effective Poke Ball in the game',
            option: ['poke ball', 'ultra ball', 'a pikachu', 'master ball'],
            answer: 'master ball'
        },
        {
            question: 'Which was the first gym leader that beated Ash?',
            option: ['brock', 'misty', 'giovanni', 'erika'],
            answer: 'brock'
        },
        {
            question: 'Which was the first pokemon that was released from Ash?',
            option: ['pidgeot', 'buterfree', 'pikachu', 'lapras'],
            answer: 'buterfree'
        },
        {
            question: 'How many Gym Badges must a trainer collect before challenging the Elite Four?',
            option: ['4', '6', '8', '9'],
            answer: '8'
        },
        {
            question: 'What was the first pokemon ever created?', 
            option: ['bulbasaur', 'charmander', 'rhydon', 'pikachu'], 
            answer: 'rhydon'
        },
        {
            question: 'Which pokemon has the same cry as Charizard in games?',
            option: ['mewtwo', 'rhyhorn', 'dragonite', 'lugia'],
            answer: 'rhyhorn'
        },
        {
            question: 'Which pokemon is the longest one to hatch from an egg?',
            option: ['dratini', 'onix', 'pikachu', 'venomoth'],
            answer: 'onix'
        },
        {
            question: 'Which is the lightest pokemon?',
            option: ['metapod', 'pikachu', 'ghastly', 'caterpie'],
            answer: 'ghastly'
        },
        {
            question: 'What food do Kinglers mainly eat?',
            option: ['pikachu', 'krabby', 'shellder', 'magikarp'],
            answer: 'shellder'
        }
    ],
    // checks if button press is correct
    check: function() {
        buttonVal = $(this).attr('value');
        console.log(buttonVal);
        console.log(triviaAnswer);
        if (buttonVal === triviaAnswer) {
            correct++;
            console.log(`Correct: ${correct}`);
            isCorrect = true;

        } else {
            incorrect++;
            console.log(`Incorrect: ${incorrect}`);
            isCorrect = false;
        }
        clearInterval(clock)
        game.nextPage(); // PAUSING THE GAME TO WORK ON DOM
    },
    // show page after player win or lose
    nextPage: function() {
        round = false; // declare that round isnt running
        $('#content').empty(); // clear out content
        count = 3; // set interval to 3 secs to run on this page

        // win or lose
        if (isCorrect) {
            $('#content').append(`<img src="${triviaIMG}" alt="">`);
        } else {
            $('#content').append(`<img src="https://media1.tenor.com/images/84c4e8c1a24b84bece745d2dcd2a5aa8/tenor.gif?itemid=5220649" alt="">`);

        }
        game.startTimer();
    },
    // advance to next round
    nextRound: function() {
        round = true;
        count = 5;
        $('#content').empty();
        $('#content').append(`<div id='game-timer' class='display-2'>00:0${count}`); // display 3 second timer
        $('#content').append(`<div id='question'>${JSON.stringify(game.array[questionNum].question)}`);

        // loop through object of questions and display possible options
        triviaQuestion = Object.values(game.array[questionNum])[1];
        triviaAnswer = Object.values(game.array[questionNum])[2];
        triviaIMG = Object.values(game.array[questionNum])[3];
        for (var i = 0; i < triviaQuestion.length; i++) {
            console.log(`${triviaQuestion[i]}`);
            $('#content').append(`<button id='option-${i}' class='option btn btn-primary btn-lg' value="${triviaQuestion[i]}">${triviaQuestion[i]}`);
        }
        $('button').on('click', game.check);

        // increment to next question each time this function is ran
        questionNum++;
        game.startTimer();
    },
    timer: function() {
        console.log(count);
        count--; //lose a timer

        if (count === 0 && round === true) { // if time is out and game/round is live
            console.log('round true');
            clearInterval(clock); // clear the interval that was ran
            console.log('cleared clock');
            // nextPage(); // advance next round
            game.nextPage();
        } else if (count === 0 && round === false) { // if time is out and game / round is not live
            console.log('round false');
            clearInterval(clock); // clear the interval that was ran
            console.log('cleared clock');
            // go to next round
            game.nextRound();
        }
        $('#game-timer').text(`00:0${count}`); // show count left

    },
    startTimer: function() {
        clock = setInterval(game.timer, 1000); // for every second, run timer
    },
    play: function() {
        questionNum = 0;
        round = false;
        correct = 0;
        incorrect = 0;
        $('#start').hide();
        game.nextRound();
    }
};
console.log(game.array);
$(document).ready(function() {
    $('#start').on('click', game.play);
});
</script>
</body>
</html>